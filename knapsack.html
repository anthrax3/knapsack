<html>

<head>
<script type="text/javascript" src="./jquery-1.11.1.min.js"></script>
<script>
$(function() {


    // GLOBAL VARIABLES

    var knapsackWeight = 0;
    var knapsackValue = 0;
    var knapsackMaxWeight = 300;


    // FUNCTIONS

    function toggleFade(itemSelector, shouldShow) {
        //itemSelector: a jQuery selector
        //shouldShow: true if should show; false if should hide
        var opacity = shouldShow ? 1 : 0;
        itemSelector.fadeTo(500, opacity);
    }

    function flipItem(upItemSelector, downItemSelector, isInHouse) {
        //upItemSelector: the upper item (the one in the house)
        //downItemSelector: the lower item (the one in the knapsack)
        //isInHouse: true if item in house; false if item in knapsack
        toggleFade(downItemSelector, isInHouse);
        toggleFade(upItemSelector, !isInHouse);
        upItemSelector.attr("data-shown", !isInHouse);
    }

    function updateValues(weight, value) {
        knapsackWeight += weight;
        knapsackValue += value;
        $("span#value").html(""+knapsackValue);
        $("span#weight").html(""+knapsackValue);
    }

    function toggle(num) {
        //This is an event that occurs whenever the item at `num' is clicked

        //num: the column number (represented as the class of the DOM element) of the relevant item
        var downItemSelector = $("tr#knapsack img."+num);
        var upItemSelector = $("tr#house img."+num);
        var isInHouse = upItemSelector.attr("data-shown"); //true if shown
        isInHouse = (isInHouse === "true") ? true : false;

        var itemWeight = parseInt(upItemSelector.attr("data-weight"));
        var itemValue = parseInt(upItemSelector.attr("data-value"));

        var newWeight = knapsackWeight + itemWeight

        if (isInHouse) {
            // In this case, we first need to check if knapsack is full!
            if (knapsackMaxWeight < newWeight) {
                alert("Not enough room in knapsack");
            } else {
                updateValues(itemWeight, itemValue);
                flipItem(upItemSelector, downItemSelector, isInHouse);
            }
        } else {
            updateValues(-itemWeight, -itemValue);
            flipItem(upItemSelector, downItemSelector, isInHouse);
        }
    }



    //MAIN METHOD
    
    updateValues(0,0);

    $("tr img").each(function() {
        $(this).click(function() {
            var num = $(this).attr("class");
            toggle(num);
        });
    });

    $("tr#knapsack img").each(function() {
        $(this).fadeTo(0,0);
    });
});
</script>

<style>
img {
    height:100;
    width:100;
}
img:hover {
    cursor:pointer;
}
</style>
</head>

<body>
<table>
    <tr id="house">
        <td>
            House
        </td>
        <td>
            <img class="1" data-shown=true data-value="100" data-weight="100" src="1.jpg" /> 
        </td>
        <td>
            <img class="2" data-shown=true data-value="100" data-weight="100" src="2.jpg" /> 
        </td>
        <td>
            <img class="3" data-shown=true data-value="100" data-weight="100" src="3.jpg" /> 
        </td>
        <td>
            <img class="4" data-shown=true data-value="100" data-weight="100" src="4.jpg" /> 
        </td>
        <td>
            <img class="5" data-shown=true data-value="100" data-weight="100" src="5.jpg" /> 
        </td>
        <td>
            <img class="6" data-shown=true data-value="100" data-weight="100" src="6.jpg" /> 
        </td>
        <td>
        </td>
    </tr>
    <tr id="knapsack">
        <td>
            Knapsack <!--TODO: Add reset button here-->
        </td>
        <td>
            <img class="1" src="1.jpg" /> 
        </td>
        <td>
            <img class="2" src="2.jpg" /> 
        </td>
        <td>
            <img class="3" src="3.jpg" /> 
        </td>
        <td>
            <img class="4" src="4.jpg" /> 
        </td>
        <td>
            <img class="5" src="5.jpg" /> 
        </td>
        <td>
            <img class="6" src="6.jpg" /> 
        </td>
        <td>
            Value: $<span id="value"></span>
            Weight: <span id="weight"></span> kg
        </td>
    </tr>
    <tr id="values">
    </tr>
</table>

</body>

</html>